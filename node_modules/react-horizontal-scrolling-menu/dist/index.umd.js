!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const o="react-horizontal-scrolling-menu",l="-separator",i=`${o}--separator`,s=`${o}--item`,a=`${o}--scroll-container`,u=`${o}--wrapper`,d="itemId",c="data-key",f="data-index";var m=Object.freeze({__proto__:null,rootClassName:o,separatorString:l,separatorClassName:i,itemClassName:s,scrollContainerClassName:a,wrapperClassName:u,id:d,dataKeyAttribute:c,dataIndexAttribute:f});function v({className:e="",children:t,onScroll:n=(()=>{}),scrollRef:o}){const l=r.default.useMemo((()=>`${a} ${e}`),[e]);return r.default.createElement("div",{className:l,onScroll:n,ref:o},t)}var h=r.default.memo((function({className:e,id:t,index:n,refs:o}){const l=r.default.useRef(null);return o[n]=l,r.default.createElement("div",Object.assign({className:e},{[c]:t,[f]:n},{ref:l}))}));var p=r.default.memo((function({children:e,className:t,id:n,index:o,refs:l}){const i=r.default.useRef(null);return l[String(o)]=i,r.default.createElement("div",Object.assign({className:t},{[c]:n,[f]:o},{ref:i}),e)}));function g({children:e,itemClassName:t="",refs:n,separatorClassName:o=""}){const a=r.default.Children.toArray(e).filter(Boolean),u=a.length,c=r.default.useMemo((()=>`${s} ${t}`),[t]),f=r.default.useMemo((()=>`${i} ${o}`),[o]);return r.default.createElement(r.default.Fragment,null,a.map(((e,t)=>{var o,i;const s=null===(i=null===(o=e)||void 0===o?void 0:o.props)||void 0===i?void 0:i[d],a=s+l,m=t+1===u;return[r.default.createElement(p,{className:c,id:s,key:"menuItem__"+s,refs:n,index:t},e),!m&&r.default.createElement(h,{className:f,id:a,refs:n,key:a,index:t+.1})]})))}function b(e,t="smooth",n="end",r="nearest"){var o,l;const i=(null===(l=null===(o=e)||void 0===o?void 0:o.entry)||void 0===l?void 0:l.target)||e;i&&window&&window.requestAnimationFrame((()=>i.scrollIntoView({block:r,behavior:t,inline:n})))}const y=e=>document.querySelector(`[data-key='${e}']`),x=e=>document.querySelector(`[data-index='${e}']`);function I(e){return r.default.isValidElement(e)&&e||"function"==typeof e&&r.default.createElement(e,null)||null}const C=e=>e.filter((e=>!new RegExp(".*-separator$").test(e)));function N({items:e,itemsChanged:t,refs:n,options:o}){const l=r.default.useRef(),[i,s]=r.default.useState([]),a=r.default.useRef(+setTimeout((()=>{}),0)),u=r.default.useCallback((t=>{e.set(function(e,t){return[...e].map((e=>{var n,r;const o=e.target,l=(null===(n=null==o?void 0:o.dataset)||void 0===n?void 0:n.key)||"";return[l,{index:String((null===(r=null==o?void 0:o.dataset)||void 0===r?void 0:r.index)||""),key:l,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,o)),global.clearTimeout(a.current),a.current=+setTimeout((()=>global.requestAnimationFrame((()=>{s((t=>{const n=e.getVisible().map((e=>e[1].key));return JSON.stringify(t)!==JSON.stringify(n)?n:t}))}))),o.throttle)}),[e,o]);return r.default.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(n),t=l.current||new IntersectionObserver(u,o);return l.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(a.current),t.disconnect(),l.current=void 0}}),[u,t,o,n]),{visibleItems:i}}function E(e,t){const[n,o]=r.default.useState(""),l=r.default.useMemo((()=>{return t=e,r.default.Children.toArray(t).map((e=>{var t,n;return null===(n=null===(t=e)||void 0===t?void 0:t.props)||void 0===n?void 0:n[d]})).filter(Boolean);var t}),[e]);return r.default.useEffect((()=>{o(l.filter(Boolean).join(""))}),[l]),r.default.useEffect((()=>{t.toItemsWithoutSeparators().filter((e=>!l.includes(e))).forEach((e=>t.delete(e)))}),[n]),n}class S extends Map{toArr(){return this.sort([...this])}toItems(){return this.toArr().map((([e])=>e))}toItemsWithoutSeparators(){return C(this.toItems())}toItemsKeys(){return this.toItems()}sort(e){return e.sort((([,e],[,t])=>+e.index-+t.index))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((([e,t])=>{super.set(e,t)})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const w={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100};function M({cb:e=(()=>{}),condition:t,visibleItems:n}){const o=t?JSON.stringify(n):"",l=function(e){const t=r.default.useRef();return r.default.useEffect((()=>{t.current=e}),[e]),t.current}(o);r.default.useEffect((()=>{t&&l!==o&&e()}),[t,l,o])}const A=r.default.createContext({}),R=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}-separator`)),[]).slice(0,-1);e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,onInit:o=(()=>{}),onUpdate:l=(()=>{}),onMouseDown:i,onMouseUp:s,onMouseMove:a,onScroll:d=(()=>{}),onWheel:c=(()=>{}),options:f=w,scrollContainerClassName:m="",itemClassName:h="",separatorClassName:p="",wrapperClassName:R="",apiRef:$={current:{}}}){const O=I(e),j=I(t),k=r.default.useRef(null),[B]=r.default.useState({}),T=r.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},w),f),{root:k.current})),[f,k.current]),V=r.default.useRef(new S).current,_=E(n,V),{visibleItems:z}=N({items:V,itemsChanged:_,options:T,refs:B}),W=r.default.useRef({}),q=!!z.length;M({cb:()=>l(W.current),condition:function({cb:e,condition:t}){let n=t;null!=n||(n=!0);const[o,l]=r.default.useState(!1);return r.default.useEffect((()=>{n&&!o&&(l(!0),e())}),[n,o]),o}({cb:()=>o(W.current),condition:q}),visibleItems:z});const P=r.default.useMemo((()=>function(e,t=[]){var n,r;const o=C(t),l=!!(null===(n=e.first())||void 0===n?void 0:n.visible),i=!!(null===(r=e.last())||void 0===r?void 0:r.visible),s=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},a=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},u=()=>{var t,n,r,o;return e.next(null===(o=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===o?void 0:o[1])};return{getItemById:s,getItemElementById:y,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:x,getNextItem:u,getPrevItem:a,isFirstItemVisible:l,isItemVisible:e=>t.includes(e),isLastItem:t=>e.last()===s(t),isLastItemVisible:i,scrollNext:(e="smooth",t="start",n="nearest")=>b(u(),e,t,n),scrollPrev:(e="smooth",t="end",n="nearest")=>b(a(),e,t,n),scrollToItem:b,visibleItems:t,visibleItemsWithoutSeparators:o}}(V,z)),[V,z]);W.current=r.default.useMemo((()=>Object.assign(Object.assign({},P),{initComplete:q,items:V,scrollContainer:k})),[P,q,V]),$.current=W.current;const F=r.default.useCallback((e=>d(W.current,e)),[d,W]),L=r.default.useCallback((e=>c(W.current,e)),[c,W]),J=r.default.useMemo((()=>`${u} ${R}`),[R]);return r.default.createElement("div",{className:J,onWheel:L,onMouseDown:null==i?void 0:i(W.current),onMouseUp:null==s?void 0:s(W.current),onMouseMove:null==a?void 0:a(W.current)},r.default.createElement(A.Provider,{value:W.current},O,r.default.createElement(v,{className:m,onScroll:F,scrollRef:k},r.default.createElement(g,{refs:B,itemClassName:h,separatorClassName:p},n)),j))},e.VisibilityContext=A,e.constants=m,e.getItemsPos=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const r=0===t,o=t===n.length-1,i=new RegExp(l).test(e);return!((r||o)&&i)})))(e),r=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:r,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}},e.slidingWindow=function(e,t){const n=C(e),r=C(t);return{prev:()=>R(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,o=n-r,l=o<0,i=l?0:o,s=e.slice(i,l?r:n);return s.length===r?s:e.slice(n,r)}(n,r)),next:()=>R(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,o=n+r+1,l=o>e.length-1,i=l?e.length-1:o,s=e.slice(l?i-r+1:n+1,i);return s.length===r?s:e.slice(e.length-r,e.length+r)}(n,r))}},Object.defineProperty(e,"__esModule",{value:!0})}));
